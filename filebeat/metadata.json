{
  "name": "filebeat",
  "description": "Installs/Configures Elastic Filebeat",
  "long_description": "filebeat Cookbook\n================\n\n[![Cookbook](https://img.shields.io/github/tag/vkhatri/chef-filebeat.svg)](https://github.com/vkhatri/chef-filebeat) [![Build Status](https://travis-ci.org/vkhatri/chef-filebeat.svg?branch=master)](https://travis-ci.org/vkhatri/chef-filebeat)\n\nThis is a [Chef] cookbook to manage [Filebeat].\n\n\n>> For Production environment, always prefer the [most recent release](https://supermarket.chef.io/cookbooks/filebeat).\n\n\n## Most Recent Release\n\n```ruby\ncookbook 'filebeat', '~> 2.1.0'\n```\n\n\n## From Git\n\n```ruby\ncookbook 'filebeat', github: 'vkhatri/chef-filebeat',  tag: 'v2.1.0'\n```\n\n\n## Repository\n\n```\nhttps://github.com/vkhatri/chef-filebeat\n```\n\n\n## Supported OS\n\n- Windows\n- Amazon Linux\n- CentOS\n- Fedora\n- Ubuntu\n- Debian\n- Mac OSX\n\nAlso works on Solaris zones given a physical Solaris 11.2 server. For that, use the .kitchen.zone.yml file. Check usage at (https://github.com/criticalmass/kitchen-zone). You will need an url to a filebeat package that works on Solaris 11.2. Checkout Building-Filebeat-On-Solaris11.md for instructions to build a filebeat package.\n\n\n## Supported Chef\n\n- Chef 12 (last tested on 12.21.4)\n\n- Chef 13 (last tested on 13.3.42)\n\n\n## Supported Filebeat\n\n- 5.x\n- 6.x\n\n\n## Cookbook Dependency\n\n- `homebrew`\n- `elastic_repo`\n- `yum-plugin-versionlock`\n- `runit`\n- `windows`\n\n\n## Recipes\n\n- lwrp_test - LWRP examples recipe\n\n\n## LWRP Resources\n\n- `filebeat_config` - filebeat configuration resource\n\n- `filebeat_install` - filebeat install resource\n\n- `filebeat_install_preview` - filebeat preview package install resource\n\n- `filebeat_service` - filebeat service resource\n\n- `filebeat_prospector` - filebeat prospector resource\n\n\n## Limitations\n\nThe Mac OSX setup only allows for package installs and depends on brew, this means that version selection and preview build installs are not supported.\n\n\n## LWRP filebeat_install\n\nLWRP `filebeat_install` installs filebeat, creates log/prospectors directories, and also enable filebeat service.\n\nBelow attributes are derived using helper methods and also used by other LWRP.\n\n- `conf_dir`\n- `prospectors_dir`\n- `log_dir`\n\n**LWRP example**\n\n```ruby\nfilebeat_install 'default' do\n  [options ..]\nend\n```\n\n\n**LWRP Options**\n\n- *action* (optional)\t- default `:create`, options: :create, :delete\n- *version* (optional, String)\t- default `6.3.0`, filebeat version\n- *release* (optional, String)\t- default `1`, filebeat release version, used by `rhel` family package resource\n- *setup_repo* (optional, Boolean) - default `true`, set to `false`, to skip elastic repository setup using cookbook `elastic_repo`\n- *ignore_package_version* (optional, Boolean) - default `false`, set to true, to install latest available yum/apt filebeat package\n- *service_name* (optional, String) - default `filebeat`, filebeat service name, must be common across resources\n- *disable_service* (optional, Boolean) - default `false`, set to `true`, to disable filebeat service\n- *notify_restart* (optional, Boolean) - default `true`, set to `false`, to ignore filebeat service restart notify\n- *delete_prospectors_dir* (optional, Boolean) - default `false`, set to `true`, to purge prospectors directory by deleting and recrating prospectors directory\n- *conf_dir* (optional, String, NilClass) - default `nil`, filebeat configuration directory, this attribute is derived by helper method\n- *prospectors_dir* (optional, String, NilClass) - default `nil`, filebeat prospectors directory, this attribute is derived by helper method\n- *log_dir* (optional, String, NilClass) - default `nil`, filebeat log directory, this attribute is derived by helper method\n- *windows_package_url* (optional, String) - default `auto`, windows filebeat package url\n- *windows_base_dir* (optional, String) - default `C:/opt/filebeat`, filebeat windows base directory\n- *apt_options* (optional, Array) - default `%w[stable main]`, filebeat package resource attribute for `debian` platform family\n- *elastic_repo_options* (optional, Hash) - default `{}`, resource elastic_repo options, `filebeat_install` attribute `version` overrides `elasti_repo_options` key `version` value. Check out [elastic_repo cookbook](https://github.com/vkhatri/chef-elastic-repo) for more details.\n\n\n## LWRP filebeat_service\n\nLWRP `filebeat_service` configures `filebeat` service.\n\n\n**LWRP example**\n\n```ruby\nfilebeat_service 'default' do\n  [options ..]\nend\n```\n\n**LWRP Options**\n\n- *action* (optional)\t- default `:create`, options: :create, :delete\n- *filebeat_install_resource_name* (optional, String) - default `default`, filebeat_install/filebeat_install_preview resource name, set this attribute if LWRP resource name is other than `default`\n- *service_name* (optional, String) - default `filebeat`, filebeat service name, must be common across resources\n- *disable_service* (optional, Boolean) - default `false`, set to `true`, to disable filebeat service\n- *notify_restart* (optional, Boolean) - default `true`, set to `false`, to ignore filebeat service restart notify\n- *purge_prospectors_dir* (optional, Boolean) - default `false`, set to `true`, to purge prospectors\n- *runit_filebeat_cmd_options* (optional, Boolean) - default `''`, set to `true`, runit filebeat service command line options\n- *ignore_failure* (optional, Boolean) - default `false`, set to `true`, to ignore filebeat service failures\n- *retries* (optional, Integer) - default `2`, filebeat service resource attribute\n- *retry_delay* (optional, Integer) - default `0`, filebeat service resource attribute\n\n\n## LWRP filebeat_config\n\nLWRP `filebeat_config` creates filebeat configuration yaml file `/etc/filebeat/filebeat.yml`.\n\nBelow filebeat configuration parameters gets overwritten by the LWRP.\n\n- `filebeat.registry_file`\n- `filebeat.config_dir`\n- `logging.files`\n\n\n**LWRP example**\n\n```ruby\nconf = {\n  'filebeat.modules' => [],\n  'prospectors' => [],\n  'logging.level' => 'info',\n  'logging.to_files' => true,\n  'logging.files' => { 'name' => 'filebeat' },\n  'output.elasticsearch' => { 'hosts' => ['127.0.0.1:9200'] }\n}\n\nfilebeat_config 'default' do\n  config conf\n  action :create\nend\n```\n\nAbove LWRP Resource will create a file `/etc/filebeat/conf.d/lwrp-prospector-messages_log.yml` with content:\n\n```yaml\nfilebeat.modules: []\nprospectors: []\nlogging.level: info\nlogging.to_files: true\nlogging.files:\n  path: \"/var/log/filebeat\"\noutput.elasticsearch:\n  hosts:\n  - 127.0.0.1:9200\nfilebeat.registry_file: \"/var/lib/filebeat/registry\"\nfilebeat.config_dir: \"/etc/filebeat/conf.d\"\n```\n\n**LWRP Options**\n\n- *action* (optional)\t- default `:create`, options: :create, :delete\n- *filebeat_install_resource_name* (optional, String) - default `default`, filebeat_install/filebeat_install_preview resource name, set this attribute if LWRP resource name is other than `default`\n- *config* (Hash) - default `{}` filebeat configuration options\n- *sensitive* (optional, Boolean) - default `false`, filebeat configuration file chef resource attribute\n- *service_name* (optional, String) - default `filebeat`, filebeat service name, must be common across resources\n- *conf_file* (optional, String, NilClass) - default `nil`, filebeat configuration file, this attribute is derived by helper method\n- *disable_service* (optional, Boolean) - default `false`, set to `true`, to disable filebeat service\n- *notify_restart* (optional, Boolean) - default `true`, set to `false`, to ignore filebeat service restart notify\n\n\n## LWRP filebeat_prospector\n\nLWRP `filebeat_prospector` creates a filebeat prospector configuration yaml file under prospectors directory with file name `lwrp-prospector-#{resource_name}.yml`.\n\n\n**LWRP example**\n\n```ruby\nconf = {\n  'enabled' => true,\n  'paths' => ['/var/log/messages'],\n  'type' => 'log',\n  'fields' => {'type' => 'messages_log'}\n}\n\nfilebeat_prospector 'messages_log' do\n  config conf\n  action :create\nend\n```\n\nAbove LWRP Resource will create a file `/etc/filebeat/conf.d/lwrp-prospector-messages_log.yml` with content:\n\n```yaml\nfilebeat:\n  prospectors:\n  - enabled: true\n    paths:\n    - \"/var/log/messages\"\n    type: log\n    fields:\n      type: messages_log\n```\n\n**LWRP Options**\n\n- *action* (optional)\t- default `:create`, options: :create, :delete\n- *filebeat_install_resource_name* (optional, String) - default `default`, filebeat_install/filebeat_install_preview resource name, set this attribute if LWRP resource name is other than `default`\n- *config* (Hash) - default `{}` filebeat configuration options\n- *sensitive* (optional, Boolean) - default `false`, filebeat configuration file chef resource attribute\n- *service_name* (optional, String) - default `filebeat`, filebeat service name, must be common across resources\n- *disable_service* (optional, Boolean) - default `false`, set to `true`, to disable filebeat service\n- *notify_restart* (optional, Boolean) - default `true`, set to `false`, to ignore filebeat service restart notify\n\n\n## How to Create Filebeat LWRP Resources via Node Attribute\n\nCheck out filebeat test cookbook [filebeat_test](test/cookbooks/filebeat_test).\n\n\n## Contributing\n\n1. Fork the repository on Github\n2. Create a named feature branch (like `add_component_x`)\n3. Write your change\n4. Write tests for your change (if applicable)\n5. Run the tests (`rake & rake knife`), ensuring they all pass\n6. Write new resource/attribute description to `README.md`\n7. Write description about changes to PR\n8. Submit a Pull Request using Github\n\n\n## Copyright & License\n\nAuthors:: Virender Khatri and [Contributors]\n\n<pre>\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n</pre>\n\n\n[Chef]: https://www.chef.io/\n[Filebeat]: https://www.elastic.co/products/beats/filebeat\n[Contributors]: https://github.com/vkhatri/chef-filebeat/graphs/contributors\n",
  "maintainer": "Virender Khatri",
  "maintainer_email": "vir.khatri@gmail.com",
  "license": "Apache-2.0",
  "platforms": {
    "windows": ">= 0.0.0",
    "debian": ">= 0.0.0",
    "ubuntu": ">= 0.0.0",
    "centos": ">= 0.0.0",
    "amazon": ">= 0.0.0",
    "redhat": ">= 0.0.0",
    "fedora": ">= 0.0.0"
  },
  "dependencies": {
    "homebrew": "~> 4.2",
    "elastic_repo": ">= 1.1.1",
    "yum-plugin-versionlock": ">= 0.1.2",
    "runit": ">= 0.0.0",
    "windows": ">= 0.0.0"
  },
  "providing": {

  },
  "attributes": {

  },
  "recipes": {

  },
  "version": "2.1.0",
  "source_url": "https://github.com/vkhatri/chef-filebeat",
  "issues_url": "https://github.com/vkhatri/chef-filebeat/issues",
  "privacy": false,
  "chef_versions": [
    [
      ">= 12.13"
    ]
  ],
  "ohai_versions": [

  ],
  "gems": [

  ]
}
